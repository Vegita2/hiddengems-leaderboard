<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Hidden Gems Leaderboard — Rank Chart</title>

	<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
			crossorigin="anonymous"
	/>
	<link href="./assets/styles.css" rel="stylesheet"/>
	<link href="./assets/chart.css" rel="stylesheet"/>

	<!-- Import map: CDN dependencies for this page -->
	<script type="importmap">
	{
		"imports": {
			"chart.js": "https://esm.sh/chart.js@4.5.0",
			"chart.js/helpers": "https://esm.sh/chart.js@4.5.0/helpers",
			"chartjs-plugin-datalabels": "https://esm.sh/chartjs-plugin-datalabels@2.2.0?external=chart.js",
			"chartjs-plugin-zoom": "https://esm.sh/chartjs-plugin-zoom@2.2.0?external=chart.js",
			"chartjs-plugin-annotation": "https://esm.sh/chartjs-plugin-annotation@3.1.0?external=chart.js"
		}
	}
	</script>
</head>
<body class="bg-body">
<hg-navbar active="chart"></hg-navbar>

<main class="container-fluid py-4">
	<div class="chart-shell">
		<div class="chart-inputs">
			<div class="row g-3 align-items-end">
				<div class="col-12 col-md-6 col-lg-3">
					<label class="form-label" for="startDate">Start date</label>
					<input class="form-control" type="date" id="startDate" />
				</div>
				<div class="col-12 col-md-6 col-lg-3">
					<label class="form-label" for="endDate">End date</label>
					<input class="form-control" type="date" id="endDate" />
				</div>
				<div class="col-12 col-md-6 col-lg-3">
					<label class="form-label" for="stageSelect">Stage</label>
					<select class="form-select" id="stageSelect"></select>
				</div>
				<div class="col-12 col-md-6 col-lg-3">
					<label class="form-label" for="stageKeySelect">Stage key</label>
					<select class="form-select" id="stageKeySelect"></select>
				</div>
			</div>
			<div class="row g-3 align-items-start mt-1">
				<div class="col-12 col-lg-3">
					<div class="vstack gap-3">
						<div>
							<label class="form-label" for="xPoints">X points</label>
							<input class="form-control" type="number" inputmode="numeric" id="xPoints" min="2" step="1" value="36"/>
						</div>
						<div>
							<label class="form-label" for="yMetric">Y metric</label>
							<select class="form-select" id="yMetric" aria-label="Select Y axis metric">
								<option value="rank">Rank</option>
								<option value="score" selected>Score</option>
							</select>
						</div>
						<div>
							<label class="form-label" for="rankLimit">Rank limit</label>
							<input class="form-control" type="number" inputmode="numeric" id="rankLimit" min="1" step="1" placeholder="All"/>
						</div>
						<div class="d-flex flex-wrap gap-2">
							<span class="badge text-bg-secondary" id="daysBadge" title="Days in range"></span>
							<span class="badge text-bg-secondary" id="botsBadge" title="Bots in range"></span>
						</div>
					</div>
				</div>

				<div class="col-12 col-lg-9">
					<label class="form-label" for="highlightBots">Highlight bots</label>
					<input class="form-control mb-2" id="botSearch" type="search" placeholder="Filter bots…"/>
					<select class="form-select" id="highlightBots" multiple size="8" aria-label="Select bots to highlight"></select>
					<div class="form-text">Select one or more bots to highlight; others will be dimmed.</div>
				</div>
			</div>
		</div>

		<div class="mt-3">
			<hg-alerts page="chart"></hg-alerts>
		</div>

				<div class="card shadow-sm chart-card mt-3">
					<div class="card-body">
						<div class="ratio ratio-16x9">
							<canvas id="rankChart" aria-label="Bot rank over time"></canvas>
						</div>
						<div class="form-text mt-2">
							Value is on the Y axis. Missing days are shown as gaps.
						</div>
					</div>
				</div>
	</div>
</main>

<script type="module" src="./assets/chart.js"></script>
</body>
</html>
